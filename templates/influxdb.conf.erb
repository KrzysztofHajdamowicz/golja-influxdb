# This config file is managed by Puppet
<%-
  def value_parser(v)
    return v if v =~ /^[\d]+$/

    return v if v.is_a?(Integer)

    return v if v.is_a?(TrueClass)

    return v if v.is_a?(FalseClass)

    return v if v.is_a?(Float)

    return v if v.is_a?(Array)

    # if we get here just return a string
    return "\"#{v}\""
  end
-%>


# GLOBAL configuration options
<%- if @global_config and ! @global_config.empty? -%>
  <%-  @global_config.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
  <%- end -%>
<%- end -%>

[meta]
<%- @meta_config.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
<%- end -%>

[data]
<%- @data_config.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
<%- end -%>

[coordinator]
<%- @coordinator_config.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
<%- end -%>

[retention]
<%- @retention_config.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
<%- end -%>

[shard-precreation]
<%- @shard_precreation_config.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
<%- end -%>

[monitor]
<%- @shard_precreation_config.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
<%- end -%>

[admin]
<%- @admin_config.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
<%- end -%>

[http]
<%- @http_config.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
<%- end -%>

[subscriber]
<%- @http_config.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
<%- end -%>

<%- if @hinted_handoff_config and ! @hinted_handoff_config.empty? -%>
[hinted-handoff]
  <%- @hinted_handoff_config.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
  <%- end -%>
<%- end -%>

<%- if @graphite_config and ! @graphite_config.empty? -%>
[[graphite]]
  <%- @graphite_config.each do |section_name, data| -%>
    <%- data.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
    <%- end -%>
  <%- end -%>
<%- end -%>

<%- if @collectd_config and ! @collectd_config.empty? -%>
[[collectd]]
  <%- @collectd_config.each do |section_name, data| -%>
    <%- data.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
    <%- end -%>
  <%- end -%>
<%- end -%>

<%- if @opentsdb_config and ! @opentsdb_config.empty? -%>
[[opentsdb]]
  <%- @opentsdb_config.each do |section_name, data| -%>
    <%- data.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
    <%- end -%>
  <%- end -%>
<%- end -%>

[<%- if @udp_config and ! @udp_config.empty? -%>
[[udp]]
  <%- @udp_config.each do |section_name, data| -%>
    <%- data.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
    <%- end -%>
  <%- end -%>
<%- end -%>

[<%- if @continuous_queries_config and ! @continuous_queries_config.empty? -%>
[continuous_queries]
  <%- @continuous_queries_config.each do |section_name, data| -%>
    <%- data.sort_by{|key, value| key}.each do |key, value| -%>
<%= key %> = <%= value_parser(value) %>
    <%- end -%>
  <%- end -%>
<%- end -%>
